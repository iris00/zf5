<!DOCTYPE html>
<head>
  <meta charset="UTF-8">
  <title>Dynamic Dropdown</title>
  <base target="iframe">
  <link rel="stylesheet" href="css/style.css">
  </head>
  <body>
    <div id="page-wrap">
      <h1>Pulls from text files</h1>
      <form action="" target="iframe">
        <select name="geography" id="geography">
          <option selected value="base">Please Select</option>
          <option value="beverages">Beverages</option>
          <option value="snacks">Snacks</option>
        </select>
        <br />
        <select name="area" id="area">
          <option value="Base">Please choose from above</option>
        </select>
        <input name="download" type="submit" value="Download" class="button info" id="download"/>
      </form>
    </div>
    <iframe name="iframe" id="iframe" src="" frameborder="1" width="800" height="400"></iframe>
    <script src='http://code.jquery.com/jquery-latest.min.js'></script>
    <script>
      $(function() {
	      $('#geography').change(function() {
		      $('#area').load('textdata/' + $(this).val() + '.txt');
		    });
        $.fn.chained = function(parent_selector, options) {
          //return this.each(function() {
            //var self   = this;
            //var backup = $(self).clone();
            //$(parent_selector).each(function() {
              //$(this).bind('change', function() {
                //$(self).html(backup.html());
                //var selected = '';
                // $(parent_selector).each(function() {
                //   selected += '\\' + $(':selected', this).val();
                // });
                //selected = selected.substr(1);
                //var first = $(parent_selector).first();
                //var selected_first = $(':selected', first).val();
                //$('option', self).each(function() {
                // if (!$(this).hasClass(selected) && !$(this).hasClass(selected_first) && $(this).val() !== '') {
                //   $(this).remove();
                // }
              //});
              // if (1 == $('option', self).size() && $(self).val() === '') {
              //   $(self).attr('disabled', 'disabled');
              // } else {
              //   $(self).removeAttr('disabled');
              // }
              //$(self).trigger('change');
            //});
            //if ( !$('option:selected', this).length ) {
              //$('option', this).first().attr('selected', 'selected');
            //}
            //$(this).trigger('change');
          //});
        //});
      };
      //$.fn.chainedTo = $.fn.chained;
      });
//(jQuery);
  		$(document).ready(function() {
        $('#area').chained('#geography');
        $('#download').on('click', function(e){
          e.preventDefault();
					$('#iframe').attr('src', $('#area').val() + '.html');
          //$(this).attr('target', '_self');
//window.open($('#area').val() + '.html', 'iframe');
          //$('#iframe').load($('#area').val() + '.html'); 
        });
      });
    </script>
  </body>
</html>